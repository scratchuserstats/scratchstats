<!DOCTYPE html>
<html>
   <head>
      <title>Stats | ScratchStats.cf</title>
      <link rel="stylesheet" href="./index.css">
      <link rel="stylesheet" href="./sweetalert2.min.css">
      <script src="./index.js"></script>
      <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
      </link>
      <script src="./sweetalert2.min.js"></script>
      <script>
     function getUser() {

    if(location.hash===""){
        swal({
            title: 'Enter a Scratch Username',
            type: 'warning',
            html: '<br><input id="in" /> ',
            showCancelButton: false,
            confirmButtonColor: '#3085d6',
            confirmButtonText: 'Get stats'
        }).then(function () {
            username = document.getElementById('in').value;
            userStatsUpdate(username);
            location.hash=username;
        });
    }
    else {
        username = location.hash.substring(1);
        userStatsUpdate(username);
    }

}

function copy() {
copyTextToClipboard("http://scratchstats/#"+username);
}

function copyTextToClipboard(text) {
  var textArea = document.createElement("textarea");

  //
  // *** This styling is an extra step which is likely not required. ***
  //
  // Why is it here? To ensure:
  // 1. the element is able to have focus and selection.
  // 2. if element was to flash render it has minimal visual impact.
  // 3. less flakyness with selection and copying which **might** occur if
  //    the textarea element is not visible.
  //
  // The likelihood is the element won't even render, not even a flash,
  // so some of these are just precautions. However in IE the element
  // is visible whilst the popup box asking the user for permission for
  // the web page to copy to the clipboard.
  //

  // Place in top-left corner of screen regardless of scroll position.
  textArea.style.position = 'fixed';
  textArea.style.top = 0;
  textArea.style.left = 0;

  // Ensure it has a small width and height. Setting to 1px / 1em
  // doesn't work as this gives a negative w/h on some browsers.
  textArea.style.width = '2em';
  textArea.style.height = '2em';

  // We don't need padding, reducing the size if it does flash render.
  textArea.style.padding = 0;

  // Clean up any borders.
  textArea.style.border = 'none';
  textArea.style.outline = 'none';
  textArea.style.boxShadow = 'none';

  // Avoid flash of white box if rendered for any reason.
  textArea.style.background = 'transparent';


  textArea.value = text;

  document.body.appendChild(textArea);

  textArea.select();

  try {
    var successful = document.execCommand('copy');
    var msg = successful ? 'successful' : 'unsuccessful';
    console.log('Copying text command was ' + msg);
  } catch (err) {
    console.log('Oops, unable to copy');
  }

  document.body.removeChild(textArea);
}

      </script>
   </head>
   <body onload="getUser()">
      <nav>
         <ul id="outerNavBar">
            <ul id="navbar">
               <li class="navbar-item">
                  <a href="./">
                     <center><img src="./icon.png" width="50px"></img></center>
                  </a>
               </li>
               <li class="navbar-item">
                  <a href="./global-stats.html">
                     <div class="navbar-text">
                        <center>Global Stats</center>
                     </div>
                  </a>
               </li>
               <li class="navbar-item">
                  <a href="./about.html">
                     <div class="navbar-text">
                        <center>About</center>
                     </div>
                  </a>
               </li>
            </ul>
         </ul>
      </nav>
      <div id="page">
         <br>
         <br>
         <br>
         <br>
         <center>
         <div class="text-block" style="display:inline-block;">
            <h2 style="display:inline-block;font-size:50px;" class="century">Current User: &nbsp;</h2>
          <b>  <h2 style="display:inline-block;font-size:50px;" id="user" class="century" >Default</h2></b>
          <center>
            <input type="button" class="button"value="Change Username" style="padding-top:5px;" onclick="window.location.assign('http://scratchstats.cf');"></input>
            <input type="button" class="button"value="Copy URL" onclick="copy()"></input>
            <input id="url" type="textarea" value="https://scratchstats.cf"onchange="url()"onload="url()" style="display:none;"></input></center>
         </div>
       </center>
         &nbsp;
         &nbsp;
         <br><br>
         <div class="text-block statstable" id="followers-content">
            <h3 class="noBottomMargin">Followers:</h3>
            <hr>
            <center>
            <table>
               <td>
                  <div style="display:block;" id="following" class="answer">.</div>
                  <div style="display:block;" class="question">Following</div>
               </td>
               <td>
                  <div style="display:block;" id="followers" class="answer">.</div>
                  <div style="display:block;" class="question">Followers</div>
               </td>
               <td>
                  <div style="display:block;" id="avgFollowersHour" class="answer">.</div>
                  <div style="display:block;" class="question">Average Followers Per Hour</div>
               </td>
               <td>
                  <div style="display:block;" id="avgFollowersDay" class="answer">.</div>
                  <div style="display:block;" class="question">Average Followers Per Day</div>
               </td>
               <td>
                  <div style="display:block;" id="avgFollowersMonth" class="answer">.</div>
                  <div style="display:block;" class="question">Average Followers Per Month</div>
               </td>
               <td>
                  <div style="display:block;" id="avgFollowersYear" class="answer">.</div>
                  <div style="display:block;" class="question">Average Followers Per Year</div>
               </td>
            </table>
            </center>
         </div>

         <br>
         <br>
         <br>
         <div class="text-block statstable" id="mostProjectStats">
            <h3 class="noBottomMargin">Most loved/liked/commented/viewed projects:</h3>
            <hr>
            <center>
            <table>
               <td class="project">
                  <center><div style="display:block;" id="mostLoved" class="special thumbnail">.</div></center>
                  <div style="display:block;" class="question">Most üíñ Project</div>
               </td>
               <!-- <td>
                  <div style="display:block;" id="mostFavorited" class="special thumbnail">.</div>
                  <div style="display:block;" class="question">Most ‚≠ê Project</div>
               </td> -->
               <td class="project">
                  <center><div style="display:block;" id="mostLiked" class="special thumbnail">.</div></center>
                  <div style="display:block;" class="question">Most üëç Project (üíñ-üëÅÔ∏è ratio)</div>
               </td>
               <td class="project">
                  <center><div style="display:block;" id="mostViewed" class="special thumbnail">.</div></center>
                  <div style="display:block;" class="question">Most üëÅÔ∏è Project</div>
               </td>
               <td class="project">
                  <center><div style="display:block;" id="mostCommented" class="special thumbnail">.</div></center>
                  <div style="display:block;" class="question">Most üí¨ Project</div>
               </td>

            </table>
            </center>
         </div>
         <br>
         <br>
         <br>
         <div class="text-block statstable" id="averageProjectStats">
            <h3 class="noBottomMargin">Average Project Stats:</h3>
            <hr>
            <center>
            <table>
               <td>
                  <center><div style="display:block;" id="averageLoves" class="answer">.</div></center>
               </td>
               <td>
                  <div style="display:block;" id="averageFaves" class="answer">.</div>
               </td>
               <td>
                  <center><div style="display:block;" id="averageViews" class="answer">.</div></center>
               </td>
               <td>
                  <center><div style="display:block;" id="averageCommented" class="answer">.</div></center>
               </td>
               <td>
                  <center><div style="display:block;" id="averageLiked" class="answer">.</div></center>
               </td>

            </table>
            </center>
         </div>
         <br>
         <br>
         <br>
         <div class="text-block statstable" id="average-content">
           <h3 class="noBottomMargin">Miscellaneous:</h3>
           <hr>
            <center>
           <table>
             <td>
               <div style="display:block;" id="i" class="answer">
         <img id="icon" style="height:58px;width:58px;" src="https://cdn2.scratch.mit.edu/get_image/user/2641_60x60.png"></img>
       </div>
       <div style="display:block;" class="question">Icon</div>
     </td>
     <td>
       <div style="display:block;" id="joined" class="answer">.</div>
       <div style="display:block;" class="question">Join Date</div>
     </td>
     <td>
       <div style="display:block;" id="id" class="answer">.</div>
       <div style="display:block;" class="question">ID Number</div>
     </td>
     <td>
       <div style="display:block;" id="messageCount" class="answer">.</div>
       <div style="display:block;" class="question">Current Message Count</div>
     </td>
     <td>
       <div style="display:block;" id="amtOfLovedProjects" class="answer">.</div>
       <div style="display:block;" class="question">Projects loved by user</div>
     </td>
     <td>
       <div style="display:block;" id="amtOfUnsharedProjects" class="answer">.</div>
       <div style="display:block;" class="question">Projects unshared</div>
     </td>
       </table>
         </center>
       </div>
      </div>
   </body>
</html>
